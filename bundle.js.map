{"version":3,"file":"bundle.js","sources":["node_modules/tslib/tslib.es6.js","node_modules/d3-queue/src/array.js","node_modules/d3-queue/src/queue.js","node_modules/d3-collection/src/map.js","node_modules/d3-collection/src/set.js","node_modules/d3-dispatch/src/dispatch.js","node_modules/d3-request/src/type.js","node_modules/d3-request/src/json.js","node_modules/d3-request/src/request.js","node_modules/d3-dsv/src/dsv.js","node_modules/d3-dsv/src/csv.js","node_modules/d3-dsv/src/tsv.js","node_modules/d3-time/src/interval.js","node_modules/d3-time/src/millisecond.js","node_modules/d3-time/src/duration.js","node_modules/d3-time/src/day.js","node_modules/d3-time/src/second.js","node_modules/d3-time/src/minute.js","node_modules/d3-time/src/hour.js","node_modules/d3-time/src/week.js","node_modules/d3-time/src/year.js","node_modules/d3-time/src/month.js","node_modules/d3-time/src/utcMinute.js","node_modules/d3-time/src/utcHour.js","node_modules/d3-time/src/utcDay.js","node_modules/d3-time/src/utcWeek.js","node_modules/d3-time/src/utcYear.js","node_modules/d3-time/src/utcMonth.js","node_modules/d3-time-format/src/locale.js","node_modules/d3-time-format/src/defaultLocale.js","node_modules/d3-time-format/src/isoFormat.js","node_modules/d3-time-format/src/isoParse.js","src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export var slice = [].slice;\n","import {slice} from \"./array\";\n\nvar noabort = {};\n\nfunction Queue(size) {\n  this._size = size;\n  this._call =\n  this._error = null;\n  this._tasks = [];\n  this._data = [];\n  this._waiting =\n  this._active =\n  this._ended =\n  this._start = 0; // inside a synchronous task callback?\n}\n\nQueue.prototype = queue.prototype = {\n  constructor: Queue,\n  defer: function(callback) {\n    if (typeof callback !== \"function\") throw new Error(\"invalid callback\");\n    if (this._call) throw new Error(\"defer after await\");\n    if (this._error != null) return this;\n    var t = slice.call(arguments, 1);\n    t.push(callback);\n    ++this._waiting, this._tasks.push(t);\n    poke(this);\n    return this;\n  },\n  abort: function() {\n    if (this._error == null) abort(this, new Error(\"abort\"));\n    return this;\n  },\n  await: function(callback) {\n    if (typeof callback !== \"function\") throw new Error(\"invalid callback\");\n    if (this._call) throw new Error(\"multiple await\");\n    this._call = function(error, results) { callback.apply(null, [error].concat(results)); };\n    maybeNotify(this);\n    return this;\n  },\n  awaitAll: function(callback) {\n    if (typeof callback !== \"function\") throw new Error(\"invalid callback\");\n    if (this._call) throw new Error(\"multiple await\");\n    this._call = callback;\n    maybeNotify(this);\n    return this;\n  }\n};\n\nfunction poke(q) {\n  if (!q._start) {\n    try { start(q); } // let the current task complete\n    catch (e) {\n      if (q._tasks[q._ended + q._active - 1]) abort(q, e); // task errored synchronously\n      else if (!q._data) throw e; // await callback errored synchronously\n    }\n  }\n}\n\nfunction start(q) {\n  while (q._start = q._waiting && q._active < q._size) {\n    var i = q._ended + q._active,\n        t = q._tasks[i],\n        j = t.length - 1,\n        c = t[j];\n    t[j] = end(q, i);\n    --q._waiting, ++q._active;\n    t = c.apply(null, t);\n    if (!q._tasks[i]) continue; // task finished synchronously\n    q._tasks[i] = t || noabort;\n  }\n}\n\nfunction end(q, i) {\n  return function(e, r) {\n    if (!q._tasks[i]) return; // ignore multiple callbacks\n    --q._active, ++q._ended;\n    q._tasks[i] = null;\n    if (q._error != null) return; // ignore secondary errors\n    if (e != null) {\n      abort(q, e);\n    } else {\n      q._data[i] = r;\n      if (q._waiting) poke(q);\n      else maybeNotify(q);\n    }\n  };\n}\n\nfunction abort(q, e) {\n  var i = q._tasks.length, t;\n  q._error = e; // ignore active callbacks\n  q._data = undefined; // allow gc\n  q._waiting = NaN; // prevent starting\n\n  while (--i >= 0) {\n    if (t = q._tasks[i]) {\n      q._tasks[i] = null;\n      if (t.abort) {\n        try { t.abort(); }\n        catch (e) { /* ignore */ }\n      }\n    }\n  }\n\n  q._active = NaN; // allow notification\n  maybeNotify(q);\n}\n\nfunction maybeNotify(q) {\n  if (!q._active && q._call) {\n    var d = q._data;\n    q._data = undefined; // allow gc\n    q._call(q._error, d);\n  }\n}\n\nexport default function queue(concurrency) {\n  if (concurrency == null) concurrency = Infinity;\n  else if (!((concurrency = +concurrency) >= 1)) throw new Error(\"invalid concurrency\");\n  return new Queue(concurrency);\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","import request from \"./request\";\n\nexport default function(defaultMimeType, response) {\n  return function(url, callback) {\n    var r = request(url).mimeType(defaultMimeType).response(response);\n    if (callback != null) {\n      if (typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n      return r.get(callback);\n    }\n    return r;\n  };\n}\n","import type from \"./type\";\n\nexport default type(\"application/json\", function(xhr) {\n  return JSON.parse(xhr.responseText);\n});\n","import {map} from \"d3-collection\";\nimport {dispatch} from \"d3-dispatch\";\n\nexport default function(url, callback) {\n  var request,\n      event = dispatch(\"beforesend\", \"progress\", \"load\", \"error\"),\n      mimeType,\n      headers = map(),\n      xhr = new XMLHttpRequest,\n      user = null,\n      password = null,\n      response,\n      responseType,\n      timeout = 0;\n\n  // If IE does not support CORS, use XDomainRequest.\n  if (typeof XDomainRequest !== \"undefined\"\n      && !(\"withCredentials\" in xhr)\n      && /^(http(s)?:)?\\/\\//.test(url)) xhr = new XDomainRequest;\n\n  \"onload\" in xhr\n      ? xhr.onload = xhr.onerror = xhr.ontimeout = respond\n      : xhr.onreadystatechange = function(o) { xhr.readyState > 3 && respond(o); };\n\n  function respond(o) {\n    var status = xhr.status, result;\n    if (!status && hasResponse(xhr)\n        || status >= 200 && status < 300\n        || status === 304) {\n      if (response) {\n        try {\n          result = response.call(request, xhr);\n        } catch (e) {\n          event.call(\"error\", request, e);\n          return;\n        }\n      } else {\n        result = xhr;\n      }\n      event.call(\"load\", request, result);\n    } else {\n      event.call(\"error\", request, o);\n    }\n  }\n\n  xhr.onprogress = function(e) {\n    event.call(\"progress\", request, e);\n  };\n\n  request = {\n    header: function(name, value) {\n      name = (name + \"\").toLowerCase();\n      if (arguments.length < 2) return headers.get(name);\n      if (value == null) headers.remove(name);\n      else headers.set(name, value + \"\");\n      return request;\n    },\n\n    // If mimeType is non-null and no Accept header is set, a default is used.\n    mimeType: function(value) {\n      if (!arguments.length) return mimeType;\n      mimeType = value == null ? null : value + \"\";\n      return request;\n    },\n\n    // Specifies what type the response value should take;\n    // for instance, arraybuffer, blob, document, or text.\n    responseType: function(value) {\n      if (!arguments.length) return responseType;\n      responseType = value;\n      return request;\n    },\n\n    timeout: function(value) {\n      if (!arguments.length) return timeout;\n      timeout = +value;\n      return request;\n    },\n\n    user: function(value) {\n      return arguments.length < 1 ? user : (user = value == null ? null : value + \"\", request);\n    },\n\n    password: function(value) {\n      return arguments.length < 1 ? password : (password = value == null ? null : value + \"\", request);\n    },\n\n    // Specify how to convert the response content to a specific type;\n    // changes the callback value on \"load\" events.\n    response: function(value) {\n      response = value;\n      return request;\n    },\n\n    // Alias for send(\"GET\", …).\n    get: function(data, callback) {\n      return request.send(\"GET\", data, callback);\n    },\n\n    // Alias for send(\"POST\", …).\n    post: function(data, callback) {\n      return request.send(\"POST\", data, callback);\n    },\n\n    // If callback is non-null, it will be used for error and load events.\n    send: function(method, data, callback) {\n      xhr.open(method, url, true, user, password);\n      if (mimeType != null && !headers.has(\"accept\")) headers.set(\"accept\", mimeType + \",*/*\");\n      if (xhr.setRequestHeader) headers.each(function(value, name) { xhr.setRequestHeader(name, value); });\n      if (mimeType != null && xhr.overrideMimeType) xhr.overrideMimeType(mimeType);\n      if (responseType != null) xhr.responseType = responseType;\n      if (timeout > 0) xhr.timeout = timeout;\n      if (callback == null && typeof data === \"function\") callback = data, data = null;\n      if (callback != null && callback.length === 1) callback = fixCallback(callback);\n      if (callback != null) request.on(\"error\", callback).on(\"load\", function(xhr) { callback(null, xhr); });\n      event.call(\"beforesend\", request, xhr);\n      xhr.send(data == null ? null : data);\n      return request;\n    },\n\n    abort: function() {\n      xhr.abort();\n      return request;\n    },\n\n    on: function() {\n      var value = event.on.apply(event, arguments);\n      return value === event ? request : value;\n    }\n  };\n\n  if (callback != null) {\n    if (typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    return request.get(callback);\n  }\n\n  return request;\n}\n\nfunction fixCallback(callback) {\n  return function(error, xhr) {\n    callback(error == null ? xhr : null);\n  };\n}\n\nfunction hasResponse(xhr) {\n  var type = xhr.responseType;\n  return type && type !== \"text\"\n      ? xhr.response // null on error\n      : xhr.responseText; // \"\" on error\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationSecond} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import { queue } from \"d3-queue\";\nimport { json } from \"d3-request\";\nimport { utcFormat, utcParse } from \"d3-time-format\";\n\n// base url for images\nconst HIMAWARI_BASE_URL = \"https://himawari8-dl.nict.go.jp/himawari8/img/\";\nconst DSCOVR_BASE_URL = \"https://epic.gsfc.nasa.gov/\";\n\nconst SLIDER_BASE_URL = \"http://rammb-slider.cira.colostate.edu/data/\";\n\n// links to online image explorers\nconst HIMAWARI_EXPLORER = \"http://himawari8.nict.go.jp/himawari8-image.htm?sI=D531106\";\nconst DSCOVR_EXPLORER = \"https://epic.gsfc.nasa.gov\";\nconst DSCOVR_EXPLORER_ENHANCED = DSCOVR_EXPLORER + \"/enhanced\";\nconst SLIDER_EXPLORER = \"http://rammb-slider.cira.colostate.edu/\";\nconst METEOSAT_EXPLORER = \"http://oiswww.eumetsat.org/IPPS/html/MSG/IMAGERY/\";\n\n// image types\nconst INFRARED = \"INFRARED_FULL\";\nconst VISIBLE_LIGHT = \"D531106\";\nconst DSCOVR_EPIC = \"EPIC\";\nconst DSCOVR_EPIC_ENHANCED = \"EPIC_ENHANCED\";\nconst GOES_16 = \"GOES_16\";\nconst GOES_16_NATURAL = \"GOES_16_NATURAL\";\nconst GOES_17 = \"GOES_17\";\nconst METEOSAT = \"METEOSAT\";\nconst METEOSAT_IODC = \"METEOSAT_IODC\";\n\ntype ImageType = typeof INFRARED | typeof VISIBLE_LIGHT | typeof DSCOVR_EPIC |\n  typeof DSCOVR_EPIC_ENHANCED | typeof GOES_16 | typeof GOES_16_NATURAL| typeof GOES_17 |\n  typeof METEOSAT | typeof METEOSAT_IODC;\n\nconst HIMAWARI_WIDTH = 550;\nconst HIMAWARI_BLOCK_SIZES = [1, 4, 8, 16, 20];\n\nconst SLIDER_WIDTH = 678;\nconst SLIDER_BLOCK_SIZES = [1, 2, 4, 8, 16];\n\nconst DSCOVR_WIDTH = 2048;\n\nconst METEOSAT_WIDTH = 3712;\nconst METEOSAT_HEIGHT = 3630;  // cut off white bar, credit in options\n\nconst IMAGE_QUALITY = 0.95;\nconst RELOAD_INTERVAL = 1 * 60 * 1000;  // 1 minutes\nconst RELOAD_TIME_INTERVAL = 10 * 1000;  // 10 seconds\n\n// local storage keys\nconst IMAGE_DATA_KEY = \"imageData\";\nconst CACHED_DATE_KEY = \"cachedDate\";\nconst CACHED_IMAGE_TYPE_KEY = \"cachedImageType\";\n\n// unknown date\nconst UNKNOWN: Date = null;\n\nconst isExtension = browser && !!browser.storage;\n\nconst DEFAULT_OPTIONS: {animated: boolean, imageType: ImageType} = {\n  animated: false,\n  imageType: VISIBLE_LIGHT,\n};\n\ninterface ITile {\n  x: number;\n  y: number;\n  url: string;\n}\n\n/**\n * Returns an array of objects containing URLs and metadata\n * for Himawari 8 image tiles based on a given date.\n * Options:\n * - date: Date object\n * - type: boolean (default: visible light)\n * - blocks: alternative to zoom, how many images per row/column (default: 1)\n *      Has to be a valid block number (1, 4, 8, 16, 20)\n *\n * @param  {Object}       options\n */\nfunction himawariURLs(options: {date: Date, type?: ImageType, blocks: number}) {\n  const baseURL = HIMAWARI_BASE_URL + (options.type || VISIBLE_LIGHT);\n  const date = options.date;\n\n  // Define some image parameters\n  const blocks = options.blocks;\n\n  // compose URL\n  const tilesURL = `${baseURL}/${blocks}d/${HIMAWARI_WIDTH}/${utcFormat(\"%Y/%m/%d/%H%M%S\")(date)}`;\n  const tiles: ITile[] = [];\n\n  for (let y = 0; y < blocks; y++) {\n    for (let x = 0; x < blocks; x++) {\n      const url = `${tilesURL}_${x}_${y}.png`;\n\n      tiles.push({\n        url: getCachedUrl(url),\n        x,\n        y,\n      });\n    }\n  }\n\n  return {\n    blocks,\n    date,\n    tiles,\n  };\n}\n\nfunction sliderURLs(options: {date: Date, type: ImageType, blocks: number, level: number}) {\n  const date = options.date;\n\n  const blocks = options.blocks;\n  const level = options.level;\n\n  const typePath = {\n    GOES_16: \"geocolor\",\n    GOES_16_NATURAL: \"natural_color\",\n    GOES_17: \"geocolor\",\n  }[options.type];\n\n  const which = {\n    GOES_16: 16,\n    GOES_16_NATURAL: 16,\n    GOES_17: 17,\n  }[options.type];\n\n  const formattedDate = utcFormat(\"%Y%m%d\")(options.date);\n  const formattedDateTime = utcFormat(\"%Y%m%d%H%M%S\")(options.date);\n\n  const tilesURL = `${SLIDER_BASE_URL}imagery/${formattedDate}/goes-${which}---full_disk/${typePath}/${formattedDateTime}/`;\n  const tiles: ITile[] = [];\n\n  for (let y = 0; y < blocks; y++) {\n    for (let x = 0; x < blocks; x++) {\n      const url = `${tilesURL}${pad(level, 2)}/${pad(y, 3)}_${pad(x, 3)}.png`;\n\n      tiles.push({\n        url: getCachedUrl(url),\n        x,\n        y,\n      });\n    }\n  }\n\n  return {\n    blocks,\n    date,\n    tiles,\n  };\n}\n\n/**\n * Create a cached URL thanks to our friends at Google.\n * See https://gist.github.com/carlo/5379498\n *\n * Default caching is 5 days, in seconds\n */\nfunction getCachedUrl(url: string, cache = 5 * 24 * 60 * 60) {\n  return `https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url=${url}&container=focus&refresh=${cache}`;\n}\n\n/**\n * Pads a number with trailing zeros and makes it a string.\n */\nfunction pad(num: string | number, size: number) {\n  let s = num + \"\";\n  while (s.length < size) {\n    s = \"0\" + s;\n  }\n  return s;\n}\n\n/**\n * Get the date of the latest Himawari image by making an Ajax request.\n * @param   {string}  imageType  The type of image\n * @returns {function}           callback function\n */\nfunction getLatestHimawariDate(imageType: ImageType, cb: (date: Date) => void) {\n  json(`https://himawari-8.appspot.com/latest${imageType === INFRARED ? \"?infrared=true\" : \"\"}`,\n    (error, data: {date: string}) => {\n      if (error) { throw error; }\n      const latest = data.date;\n      cb(utcParse(\"%Y-%m-%d %H:%M:%S\")(latest));\n    });\n}\n\nfunction getLatestDscovrDate(imageType: ImageType, cb: (latest: {date: Date, image: string}) => void) {\n  json(`${DSCOVR_BASE_URL}api/${imageType === DSCOVR_EPIC_ENHANCED ? \"enhanced\" : \"natural\"}`,\n    (error, data: Array<{date: string, image: string}>) => {\n      if (error) { throw error; }\n      if (data.length === 0) { return; }\n      const latest = data[data.length - 1];\n      cb({\n        date: utcParse(\"%Y-%m-%d %H:%M:%S\")(latest.date),\n        image: latest.image,\n      });\n    });\n}\n\nfunction getLatestSliderDate(imageType: ImageType, cb: (date: Date) => void) {\n  const which = {\n    GOES_16: 16,\n    GOES_16_NATURAL: 16,\n    GOES_17: 17,\n  }[imageType];\n\n  json(`${SLIDER_BASE_URL}json/goes-${which}/full_disk/geocolor/latest_times.json`, (error, data: {timestamps_int: string[]}) => {\n    if (error) { throw error; }\n    cb(utcParse(\"%Y%m%d%H%M%S\")(data.timestamps_int[0]));\n  });\n}\n\nfunction getLatestMeteosatDate(imageType: ImageType, cb: (latest: {date: Date, image: string}) => void) {\n  json(`https://meteosat-url.appspot.com/msg${imageType === METEOSAT_IODC ? \"iodc\" : \"\"}`, (error, data: {url: string, date: string}) => {\n    if (error) { throw error; }\n    cb({\n      date: utcParse(\"%Y-%m-%d %H:%M:%S\")(data.date),\n      image: data.url,\n    });\n  });\n}\n\n/**\n * Looks at the screen resolution and figures out a zoom level that returns images at a sufficient resolution.\n */\nfunction getOptimalNumberOfBlocks(width: number, sizes: number[]): {blocks: number, level: number} {\n  const height = (document.getElementById(\"output\")!).clientHeight * window.devicePixelRatio;\n  const minNumber = height / width;\n\n  for (let level = 0; level < sizes.length; level++) {\n    const blocks = sizes[level];\n    if (blocks > minNumber) {\n      return {blocks, level};\n    }\n  }\n\n  const lastLevel = sizes.length - 1;\n  return {blocks: sizes[lastLevel], level: lastLevel};\n}\n\n// the date that is currently loaded\nlet loadedDate: Date = null;\nlet loadedType: ImageType = null;\n\nfunction timeSince(date: Date) {\n  const seconds = Math.floor(((new Date()).getTime() - date.getTime()) / 1000);\n\n  let interval = Math.floor(seconds / 31536000);\n\n  if (interval > 1) {\n    return interval + \" years\";\n  }\n  interval = Math.floor(seconds / 2592000);\n  if (interval > 1) {\n    return interval + \" months\";\n  }\n  interval = Math.floor(seconds / 86400);\n  if (interval > 1) {\n    return interval + \" days\";\n  }\n  interval = Math.floor(seconds / 3600);\n  if (interval > 1) {\n    return interval + \" hours\";\n  }\n  interval = Math.floor(seconds / 60);\n  if (interval > 1) {\n    return interval + \" minutes\";\n  }\n  return Math.floor(seconds) + \" seconds\";\n}\n\nfunction updateTimeAgo(date: Date) {\n  if (date === UNKNOWN) {\n    document.getElementById(\"time\").innerHTML = \"\";\n  } else {\n    document.getElementById(\"time\").innerHTML = `<abbr title=\"${date}\">${timeSince(date)}</abbr> ago`;\n  }\n}\n\n/*\n * Set the right class on the body so that we can have different css.\n */\nfunction setBodyClass(imageType: ImageType) {\n  document.body.classList.remove(\"himawari\");\n  document.body.classList.remove(\"dscovr\");\n  document.body.classList.remove(\"goes\");\n  document.body.classList.remove(\"goes16\");\n  document.body.classList.remove(\"meteosat\");\n\n  switch (imageType) {\n    case INFRARED:\n    case VISIBLE_LIGHT:\n      document.body.classList.add(\"himawari\");\n      break;\n    case DSCOVR_EPIC:\n    case DSCOVR_EPIC_ENHANCED:\n      document.body.classList.add(\"dscovr\");\n      break;\n    case GOES_16:\n    case GOES_16_NATURAL:\n    case GOES_17:\n      document.body.classList.add(\"goes\");\n      break;\n    case METEOSAT:\n    case METEOSAT_IODC:\n      document.body.classList.add(\"meteosat\");\n      break;\n    default:\n      console.warn(\"Unknown image type\", imageType);\n  }\n}\n\nfunction updateStateAndUI(date: Date, imageType: ImageType) {\n  updateTimeAgo(date);\n  loadedDate = date;\n  setBodyClass(imageType);\n  loadedType = imageType;\n}\n\n/**\n * Creates an image composed of tiles.\n * @param {Date object} date  The date for which to load the data.\n */\nfunction setHimawariImages(date: Date, imageType: ImageType) {\n  // no need to set images if we have up to date images and the image type has not changed\n  if (loadedDate && date.getTime() === loadedDate.getTime() && loadedType === imageType) {\n    return;\n  }\n\n  // if we haven't loaded images before, we want to show progress\n  const initialLoad = !localStorage.getItem(CACHED_DATE_KEY);\n\n  // immediately set the type and body class because we are not loading in the background\n  if (initialLoad) {\n    updateStateAndUI(date, imageType);\n  }\n\n  // get the URLs for all tiles\n  const result = himawariURLs({\n    blocks: getOptimalNumberOfBlocks(HIMAWARI_WIDTH, HIMAWARI_BLOCK_SIZES).blocks,\n    date,\n    type: imageType,\n  });\n\n  const pixels = result.blocks * HIMAWARI_WIDTH;\n\n  const canvas = initialLoad ? document.getElementById(\"output\") as HTMLCanvasElement : document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\")!;\n  ctx.canvas.width = pixels;\n  ctx.canvas.height = pixels;\n\n  const q = queue();\n\n  // add image to canvas and call callback when done\n  function addImage(tile: ITile, callback: () => void) {\n    const img = new Image();\n    img.setAttribute(\"crossOrigin\", \"anonymous\");\n    img.onload = () => {\n      ctx.drawImage(img, tile.x * HIMAWARI_WIDTH, tile.y * HIMAWARI_WIDTH, HIMAWARI_WIDTH, HIMAWARI_WIDTH);\n      callback();\n    };\n    img.src = tile.url;\n  }\n\n  result.tiles.forEach(tile => {\n    q.defer(addImage, tile);\n  });\n\n  // wait for all images to be drawn on canvas\n  q.awaitAll(error => {\n    if (error) { throw error; }\n\n    if (!initialLoad) {\n      // copy canvas into output in one step\n      const output = document.getElementById(\"output\") as HTMLCanvasElement;\n      const outCtx = output.getContext(\"2d\");\n      outCtx.canvas.width = pixels;\n      outCtx.canvas.height = pixels;\n      outCtx.drawImage(canvas, 0, 0);\n    }\n\n    updateStateAndUI(date, imageType);\n\n    storeCanvas(date, imageType);\n  });\n}\n\nfunction setDscovrImage(latest: {date: Date, image: string}, imageType: ImageType) {\n  // no need to set images if we have up to date images and the image type has not changed\n  if (loadedDate && latest.date.getTime() === loadedDate.getTime() && loadedType === imageType) {\n    return;\n  }\n\n  // if we haven't loaded images before, we want to show progress\n  const initialLoad = !localStorage.getItem(CACHED_DATE_KEY);\n\n  // immediately set the type and body class because we are not loading in the background\n  if (initialLoad) {\n    updateStateAndUI(latest.date, imageType);\n  }\n\n  const canvas = initialLoad ? document.getElementById(\"output\") as HTMLCanvasElement : document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  ctx.canvas.width = DSCOVR_WIDTH;\n  ctx.canvas.height = DSCOVR_WIDTH;\n\n  const img = new Image();\n  img.setAttribute(\"crossOrigin\", \"anonymous\");\n  img.onload = () => {\n    ctx.drawImage(img, 0, 0);\n\n    if (!initialLoad) {\n      // copy canvas into output in one step\n      const output = document.getElementById(\"output\") as HTMLCanvasElement;\n      const outCtx = output.getContext(\"2d\");\n      outCtx.canvas.width = DSCOVR_WIDTH;\n      outCtx.canvas.height = DSCOVR_WIDTH;\n      outCtx.drawImage(canvas, 0, 0);\n    }\n\n    updateStateAndUI(latest.date, imageType);\n\n    storeCanvas(latest.date, imageType);\n  };\n\n  const type = imageType === DSCOVR_EPIC_ENHANCED ? \"enhanced\" : \"natural\";\n  const month = pad(latest.date.getMonth() + 1, 2);\n  const date = pad(latest.date.getDate(), 2);\n  img.src = getCachedUrl(`${DSCOVR_BASE_URL}archive/${type}/${latest.date.getFullYear()}/${month}/${date}/png/${latest.image}.png`);\n}\n\nfunction setSliderImages(date: Date, imageType: ImageType) {\n  // no need to set images if we have up to date images and the image type has not changed\n  if (loadedDate && date.getTime() === loadedDate.getTime() && loadedType === imageType) {\n    return;\n  }\n\n  // if we haven't loaded images before, we want to show progress\n  const initialLoad = !localStorage.getItem(CACHED_DATE_KEY);\n\n  // immediately set the type and body class because we are not loading in the background\n  if (initialLoad) {\n    updateStateAndUI(date, imageType);\n  }\n\n  // get the URLs for all tiles\n  const result = sliderURLs({\n    date,\n    type: imageType,\n    ...getOptimalNumberOfBlocks(SLIDER_WIDTH, SLIDER_BLOCK_SIZES),\n  });\n\n  const pixels = result.blocks * SLIDER_WIDTH;\n\n  const canvas = initialLoad ? document.getElementById(\"output\") as HTMLCanvasElement : document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\")!;\n  ctx.canvas.width = pixels;\n  ctx.canvas.height = pixels;\n\n  const q = queue();\n\n  // add image to canvas and call callback when done\n  function addImage(tile: ITile, callback: () => void) {\n    const img = new Image();\n    img.setAttribute(\"crossOrigin\", \"anonymous\");\n    img.onload = () => {\n      ctx.drawImage(img, tile.x * SLIDER_WIDTH, tile.y * SLIDER_WIDTH, SLIDER_WIDTH, SLIDER_WIDTH);\n      callback();\n    };\n    img.src = tile.url;\n  }\n\n  result.tiles.forEach(tile => {\n    q.defer(addImage, tile);\n  });\n\n  // wait for all images to be drawn on canvas\n  q.awaitAll(error => {\n    if (error) { throw error; }\n\n    if (!initialLoad) {\n      // copy canvas into output in one step\n      const output = document.getElementById(\"output\") as HTMLCanvasElement;\n      const outCtx = output.getContext(\"2d\");\n      outCtx.canvas.width = pixels;\n      outCtx.canvas.height = pixels;\n      outCtx.drawImage(canvas, 0, 0);\n    }\n\n    updateStateAndUI(date, imageType);\n\n    storeCanvas(date, imageType);\n  });\n}\n\nfunction setMeteosatImages(latest: {date: Date, image: string}, imageType: ImageType) {\n  // no need to set images if we have up to date images and the image type has not changed\n  if (loadedDate && latest.date.getTime() === loadedDate.getTime() && loadedType === imageType) {\n    return;\n  }\n\n  // if we haven't loaded images before, we want to show progress\n  const initialLoad = !localStorage.getItem(CACHED_DATE_KEY);\n\n  // immediately set the type and body class because we are not loading in the background\n  if (initialLoad) {\n    updateStateAndUI(latest.date, imageType);\n  }\n\n  const canvas = initialLoad ? document.getElementById(\"output\") as HTMLCanvasElement : document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  ctx.canvas.width = METEOSAT_WIDTH;\n  ctx.canvas.height = METEOSAT_HEIGHT;\n\n  const img = new Image();\n  img.setAttribute(\"crossOrigin\", \"anonymous\");\n  img.onload = () => {\n    ctx.drawImage(img, 0, 0);\n\n    if (!initialLoad) {\n      // copy canvas into output in one step\n      const output = document.getElementById(\"output\") as HTMLCanvasElement;\n      const outCtx = output.getContext(\"2d\");\n      outCtx.canvas.width = METEOSAT_WIDTH;\n      outCtx.canvas.height = METEOSAT_HEIGHT;\n      outCtx.drawImage(canvas, 0, 0);\n    }\n\n    updateStateAndUI(latest.date, imageType);\n\n    storeCanvas(latest.date, imageType);\n  };\n\n  img.src = getCachedUrl(`${latest.image}`);\n}\n\n/** Cache the image. */\nfunction storeCanvas(date: Date, imageType: ImageType, quality = IMAGE_QUALITY) {\n  // put date and image data in cache\n  const canvas = document.getElementById(\"output\") as HTMLCanvasElement;\n  const imageData = canvas.toDataURL(\"image/jpeg\", quality);\n  try {\n    localStorage.setItem(IMAGE_DATA_KEY, imageData);\n  } catch {\n    // try again with lower quality\n    if (quality > 0.5) {\n      quality -= 0.05;\n      console.warn(`Couldn't store image. Trying again with lower image quality of ${quality}`);\n      return storeCanvas(date, imageType, quality);\n    }\n  }\n  localStorage.setItem(CACHED_DATE_KEY, date.toString());\n  localStorage.setItem(CACHED_IMAGE_TYPE_KEY, imageType);\n}\n\n/* Asynchronously load latest image(s) date and images for that date */\nfunction setLatestImage() {\n  if (!navigator.onLine) {\n    // browser is offline, no need to do this\n    return;\n  }\n\n  function himawariCallback(imageType: ImageType) {\n    getLatestHimawariDate(imageType, (latest: Date) => {\n      setHimawariImages(latest, imageType);\n    });\n  }\n\n  function dscovrCallback(imageType: ImageType) {\n    getLatestDscovrDate(imageType, (latest: {date: Date, image: string}) => {\n      setDscovrImage(latest, imageType);\n    });\n  }\n\n  function sliderCallback(imageType: ImageType) {\n    getLatestSliderDate(imageType, (latest: Date) => {\n      setSliderImages(latest, imageType);\n    });\n  }\n\n  function meteosatCallback(imageType: ImageType) {\n    getLatestMeteosatDate(imageType, (latest: {date: Date, image: string}) => {\n      setMeteosatImages(latest, imageType);\n    });\n  }\n\n  if (isExtension) {\n    browser.storage.sync.get(DEFAULT_OPTIONS).then(options => {\n      switch (options.imageType) {\n        case DSCOVR_EPIC:\n        case DSCOVR_EPIC_ENHANCED:\n          dscovrCallback(options.imageType);\n          break;\n        case GOES_16:\n        case GOES_16_NATURAL:\n        case GOES_17:\n          sliderCallback(options.imageType);\n          break;\n        case METEOSAT:\n        case METEOSAT_IODC:\n          meteosatCallback(options.imageType);\n          break;\n        case INFRARED:\n        case VISIBLE_LIGHT:\n        default:\n          himawariCallback(options.imageType);\n          break;\n      }\n    });\n  } else {\n    // if we are not in the extension, let's always load visible light\n    himawariCallback(VISIBLE_LIGHT);\n  }\n}\n\n/** Load image from local storage */\nfunction setCachedImage() {\n  const canvas = document.getElementById(\"output\") as HTMLCanvasElement;\n  const ctx = canvas.getContext(\"2d\");\n  const date = new Date(localStorage.getItem(CACHED_DATE_KEY));\n\n  const img = new Image();\n  img.onload = () => {\n    ctx.canvas.width = img.width;\n    ctx.canvas.height = img.height;\n    ctx.drawImage(img, 0, 0);\n\n    updateStateAndUI(date, localStorage.getItem(CACHED_IMAGE_TYPE_KEY) as ImageType);\n  };\n  img.src = localStorage.getItem(IMAGE_DATA_KEY);\n}\n\n// check if there are new images form time to time\nwindow.setInterval(setLatestImage, RELOAD_INTERVAL);\n\n// also load a new image when we come back online\nwindow.addEventListener(\"online\", setLatestImage);\n\nfunction init() {\n  // initial loading\n  if (localStorage.getItem(CACHED_DATE_KEY)) {\n    setCachedImage();\n  }\n  setLatestImage();\n}\n\n// enable or disable animation\nif (isExtension) {\n  browser.storage.sync.get(DEFAULT_OPTIONS).then(options => {\n    if (options.animated) {\n      document.body.classList.add(\"animated\");\n    } else {\n      document.body.classList.remove(\"animated\");\n    }\n    init();\n  });\n} else {\n  init();\n}\n\n// update the time ago\nwindow.setInterval(() => {\n  if (loadedDate) {\n    updateTimeAgo(loadedDate);\n  }\n}, RELOAD_TIME_INTERVAL);\n\n// hide some things if we are not an extension\nif (isExtension) {\n  // when we are in an extension and the storage updates, try to load the new image\n  browser.storage.onChanged.addListener(setLatestImage);\n\n  document.body.classList.add(\"extension\");\n  document.getElementById(\"go-to-options\").addEventListener(\"click\", () => {\n    browser.runtime.openOptionsPage();\n  });\n}\n\ndocument.getElementById(\"explore\").addEventListener(\"click\", () => {\n  switch (loadedType) {\n    case DSCOVR_EPIC:\n      window.open(DSCOVR_EXPLORER, \"_self\");\n    case DSCOVR_EPIC_ENHANCED:\n      window.open(DSCOVR_EXPLORER_ENHANCED, \"_self\");\n      break;\n    case GOES_16:\n    case GOES_16_NATURAL:\n    case GOES_17:\n      window.open(SLIDER_EXPLORER, \"_self\");\n      break;\n    case INFRARED:\n    case VISIBLE_LIGHT:\n      window.open(HIMAWARI_EXPLORER, \"_self\");\n      break;\n    case METEOSAT:\n    case METEOSAT_IODC:\n      window.open(METEOSAT_EXPLORER, \"_self\");\n      break;\n    default:\n      window.alert(\"No explorer found.\");\n      break;\n  }\n});\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","slice","noabort","Queue","size","_size","_call","_error","_tasks","_data","_waiting","_active","_ended","_start","poke","q","j","c","end","start","e","abort","r","maybeNotify","undefined","NaN","d","queue","concurrency","Infinity","Error","constructor","defer","callback","push","await","error","results","concat","awaitAll","Map","map","object","f","each","value","key","set","Array","isArray","o","Set","has","get","remove","property","clear","keys","values","entries","empty","proto","add","noop","dispatch","_","Dispatch","type","name","on","typename","types","T","trim","split","indexOf","copy","that","args","defaultMimeType","response","xhr","JSON","parse","responseText","url","request","mimeType","responseType","event","headers","XMLHttpRequest","user","password","timeout","respond","result","status","hasResponse","XDomainRequest","test","onload","onerror","ontimeout","onreadystatechange","readyState","onprogress","header","toLowerCase","data","send","post","method","open","setRequestHeader","overrideMimeType","fixCallback","EOL","EOF","QUOTE","NEWLINE","RETURN","objectConverter","columns","Function","stringify","join","inferColumns","rows","columnSet","create","forEach","row","column","pad","width","formatDate","date","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","isNaN","year","formatYear","getUTCFullYear","getUTCMonth","getUTCDate","delimiter","reFormat","RegExp","DELIMITER","charCodeAt","parseRows","text","N","I","eof","eol","token","replace","preformatBody","formatValue","formatRow","Date","convert","customConverter","format","formatBody","formatRows","dsv","t0","t1","newInterval","floori","offseti","count","field","interval","floor","ceil","round","d0","d1","offset","step","Math","range","stop","previous","filter","setTime","every","isFinite","millisecond","k","durationMinute","durationWeek","day","getMilliseconds","getSeconds","getMinutes","getHours","setHours","setDate","getDate","getTimezoneOffset","weekday","getDay","sunday","monday","thursday","setMonth","getMonth","getFullYear","setFullYear","setUTCSeconds","setUTCMinutes","utcDay","setUTCHours","setUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcYear","setUTCMonth","setUTCFullYear","localDate","y","m","H","M","S","L","utcDate","UTC","newYear","locale","utcFormat","utcParse","pads","-","0","numberRe","percentRe","requoteRe","fill","sign","string","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","exec","w","parseWeekdayNumberMonday","u","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","formatWeekNumberISO","timeThursday","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatFullYear","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","a","A","b","B","x","X","Y","%","utcFormats","parses","parseSpecifier","newFormat","specifier","charAt","newParse","newDate","week","toString","formatLocale","toISOString","HIMAWARI_BASE_URL","DSCOVR_BASE_URL","SLIDER_BASE_URL","INFRARED","VISIBLE_LIGHT","DSCOVR_EPIC","DSCOVR_EPIC_ENHANCED","GOES_16","GOES_16_NATURAL","GOES_17","METEOSAT","METEOSAT_IODC","HIMAWARI_WIDTH","HIMAWARI_BLOCK_SIZES","SLIDER_WIDTH","SLIDER_BLOCK_SIZES","DSCOVR_WIDTH","METEOSAT_WIDTH","METEOSAT_HEIGHT","IMAGE_QUALITY","IMAGE_DATA_KEY","CACHED_DATE_KEY","CACHED_IMAGE_TYPE_KEY","UNKNOWN","isExtension","browser","storage","DEFAULT_OPTIONS","animated","imageType","getCachedUrl","cache","num","getOptimalNumberOfBlocks","sizes","minNumber","document","getElementById","clientHeight","window","devicePixelRatio","level","blocks","lastLevel","loadedDate","loadedType","updateTimeAgo","innerHTML","getTime","timeSince","updateStateAndUI","body","classList","console","warn","setBodyClass","setHimawariImages","initialLoad","localStorage","getItem","options","baseURL","tilesURL","tiles","himawariURLs","pixels","canvas","createElement","ctx","getContext","height","tile","addImage","outCtx","drawImage","storeCanvas","img","Image","setAttribute","src","setSliderImages","typePath","which","formattedDate","formattedDateTime","sliderURLs","quality","imageData","toDataURL","setItem","setLatestImage","himawariCallback","cb","json","latest","getLatestHimawariDate","dscovrCallback","image","getLatestDscovrDate","month","setDscovrImage","sliderCallback","timestamps_int","getLatestSliderDate","meteosatCallback","getLatestMeteosatDate","setMeteosatImages","navigator","onLine","sync","then","init","setInterval","addEventListener","onChanged","addListener","runtime","openOptionsPage","DSCOVR_EXPLORER","alert"],"mappings":"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"}